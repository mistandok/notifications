<mxfile host="app.diagrams.net" modified="2023-04-16T11:44:31.862Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 YaBrowser/23.3.0.2317 Yowser/2.5 Safari/537.36" etag="wSFxjkwh-tRvAYdumrZq" version="21.1.1" type="device">
  <diagram name="Страница 1" id="4W0lnKndRwxXOgLkZ_JF">
    <mxGraphModel dx="1207" dy="819" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="cib78Emd6-TMv1SOHwyl-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="70" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-4" value="Сервис admin-panel" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="95" y="80" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-5" value="PostgreSQL" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="220" y="120" width="80" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-7" value="Django-API" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="130" width="74" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-8" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-7" target="cib78Emd6-TMv1SOHwyl-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="280" as="sourcePoint" />
            <mxPoint x="450" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-9" value="Admin" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="10" y="210" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-10" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-9" target="cib78Emd6-TMv1SOHwyl-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="270" as="sourcePoint" />
            <mxPoint x="440" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-15" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;Сервис отвечает за:&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;1) создание администратором&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;&amp;nbsp;шаблонов,&lt;/span&gt;&lt;span style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;&amp;nbsp;которые&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;соответствуют&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;определенным&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;событиям.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;2) настройку графика периодических&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;событий (групповых и единичных)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;3) Настройка каналов, по которым будет&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;событие может доставляться до&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;пользователей.&lt;/span&gt;&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="330" y="40" width="50" height="140" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-24" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="575" width="250" height="150" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-25" value="Сервис user-preference" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="95" y="585" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-26" value="MongoDB&lt;br&gt;(User preference)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="220" y="625" width="80" height="90" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-27" value="FastApi" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="635" width="74" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-28" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-27" target="cib78Emd6-TMv1SOHwyl-26">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="785" as="sourcePoint" />
            <mxPoint x="450" y="735" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-29" value="Client" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="10" y="310" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-30" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-29">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="460" as="sourcePoint" />
            <mxPoint x="80" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-36" value="access-token" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-30">
          <mxGeometry x="-0.1225" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-31" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;Сервис отвечает за&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;храненей&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;пользовательских&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;настроек для&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color); background-color: initial;&quot;&gt;подписки/отписки&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;на события&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="745" width="50" height="95" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-45" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="255" width="251" height="150" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-46" value="Сервис auth" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="95" y="265" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-47" value="&lt;br&gt;PostgreSQL (User-data)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;align=center;" vertex="1" parent="1">
          <mxGeometry x="220" y="292.5" width="80" height="85" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-48" value="Flask" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="315" width="74" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-49" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-48" target="cib78Emd6-TMv1SOHwyl-47">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="465" as="sourcePoint" />
            <mxPoint x="450" y="415" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-50" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;Сервис хранит данные&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;о пользователях&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;и производит их&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;аутентификацию&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;и авторизацию&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="430" width="50" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-51" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" target="cib78Emd6-TMv1SOHwyl-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="30" y="340" as="sourcePoint" />
            <mxPoint x="100" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-57" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="640" width="160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-58" value="Сервис notification" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="555" y="650" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-60" value="FastApi" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="563" y="695" width="74" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-62" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;API сервиса позволяет принимать&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;информацию о сгенеи&lt;span style=&quot;background-color: initial;&quot;&gt;рированых&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;событиях и позволяет осуществлять их&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;отправку в очередь сообщений&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="655" width="50" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-65" value="RabbitMQ" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="545.5" y="840" width="109" height="115" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-66" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;Очередь событий, которые&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;при последующей обработке превратятся&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;в уведомления&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="654.5" y="857.5" width="44" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-67" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-57" target="cib78Emd6-TMv1SOHwyl-65">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="710" as="sourcePoint" />
            <mxPoint x="440" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-116" value="Отправка событий в очереди" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-67">
          <mxGeometry x="-0.1412" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-77" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="130" width="250" height="141" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-78" value="Сервис scheduler" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="645" y="140" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-83" value="Python-script" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="193" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-88" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;Сервис отвечает за&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;считывание информации&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;по периодическим событиям&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;из конфигурации и отрпавку&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;этих событий в сервис&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;нотификации&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="880" y="165" width="50" height="90" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-94" value="" style="edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-9" target="cib78Emd6-TMv1SOHwyl-57">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="440" as="sourcePoint" />
            <mxPoint x="490" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-95" value="Использует API для отправки&lt;br&gt;&amp;nbsp;событий напрямую" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-94">
          <mxGeometry x="0.3532" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-96" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1.01;exitY=0.865;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-2" target="cib78Emd6-TMv1SOHwyl-77">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="440" as="sourcePoint" />
            <mxPoint x="460" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-101" value="Произвольные сервисы нашего приложения" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="930" y="440" width="143" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-102" value="" style="endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-50" target="cib78Emd6-TMv1SOHwyl-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="580" as="sourcePoint" />
            <mxPoint x="460" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-103" value="" style="endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-31" target="cib78Emd6-TMv1SOHwyl-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="580" as="sourcePoint" />
            <mxPoint x="460" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-107" value="" style="edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-77" target="cib78Emd6-TMv1SOHwyl-57">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="500" as="sourcePoint" />
            <mxPoint x="800" y="450" as="targetPoint" />
            <Array as="points">
              <mxPoint x="755" y="480" />
              <mxPoint x="600" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-108" value="Формирует периодические события&lt;br&gt;&amp;nbsp;и отправляет их в сервис notification" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-107">
          <mxGeometry x="-0.5868" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-109" value="" style="edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-101" target="cib78Emd6-TMv1SOHwyl-57">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="650" as="sourcePoint" />
            <mxPoint x="460" y="570" as="targetPoint" />
            <Array as="points">
              <mxPoint x="600" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-110" value="Формируют&lt;br&gt;различные события" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-109">
          <mxGeometry x="-0.6593" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-111" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1060" width="510" height="430" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-112" value="Сервис worker" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="555" y="1060" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-114" value="&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;API сервиса позволяет принимать&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;информацию о сгенеи&lt;span style=&quot;background-color: initial;&quot;&gt;рированых&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;событиях и позволяет осуществлять их&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;отправку в очередь сообщений.&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;В случае ошибки при генерации&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;уведомлений использовать&amp;nbsp;&lt;/div&gt;Dead Letter Queue.&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="790" y="930" width="50" height="120" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-115" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-65" target="cib78Emd6-TMv1SOHwyl-112">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="1000" as="sourcePoint" />
            <mxPoint x="480" y="950" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-117" value="Передача событий в worker" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-115">
          <mxGeometry x="-0.0192" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-125" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=-0.008;exitY=0.322;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitPerimeter=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-133" target="cib78Emd6-TMv1SOHwyl-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1205" as="sourcePoint" />
            <mxPoint x="410" y="740" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="1205" />
              <mxPoint x="400" y="687" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-126" value="&lt;div style=&quot;text-align: justify;&quot;&gt;Запрос напрямую к базе или через АПИ?&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;1) Через АПИ правильно с точки зрения микросервисной&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;архитектуры, но сложнее с реализацией (данных может&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;быть очень много по группе пользователей, а возвращать&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;их все через один запрос - неправильно. То есть надо&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;на стороне WORKER предусмотреть обработку результатов&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;запроса в цикле, пока не обработаем все)&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;2) Через прямой запрос проще, потому что можем&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;считывать батчами. Но неправильно с точки зрения&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: justify;&quot;&gt;Микросервисной архитектуры.&lt;/div&gt;" style="edgeLabel;html=1;align=right;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cib78Emd6-TMv1SOHwyl-125">
          <mxGeometry x="0.1057" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-127" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="327.6470588235294" as="sourcePoint" />
            <mxPoint x="500" y="1332" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="330" />
              <mxPoint x="400" y="1300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-133" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="1104.5" width="215" height="360" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-134" value="Python-script" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="570.5" y="1107" width="74" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-135" value="Получение необходимых данных из источников (пока сделаем только для пользовательской информации)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="512.5" y="1302" width="190" height="59" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-136" value="Определене пользовательских настроек подписок на события, на основе группы или идентификатора пользователя к которой адресовано уведомление&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="507.5" y="1162" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-137" value="Отправка по соответствующим каналам" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="547.5" y="1402" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-139" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-134" target="cib78Emd6-TMv1SOHwyl-136">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="1300" as="sourcePoint" />
            <mxPoint x="870" y="1250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-140" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-136" target="cib78Emd6-TMv1SOHwyl-135">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="1370" as="sourcePoint" />
            <mxPoint x="480" y="1320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-141" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-135" target="cib78Emd6-TMv1SOHwyl-137">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="770" y="1410" as="sourcePoint" />
            <mxPoint x="820" y="1360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-142" value="MongoDB &lt;br&gt;(История уведомлений)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="790" y="1222" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-143" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="cib78Emd6-TMv1SOHwyl-111" target="cib78Emd6-TMv1SOHwyl-114">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="1200" as="sourcePoint" />
            <mxPoint x="480" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cib78Emd6-TMv1SOHwyl-144" value="&lt;b&gt;Может стоит объединить сервис пользовательских настроек уведомлений с auth?&amp;nbsp;&lt;/b&gt;&lt;br&gt;&lt;b&gt;Плюсы:&amp;nbsp;&lt;/b&gt;&lt;br&gt;будем делать запрос в одно место и сразу отбирать нужные данные по пользователям.&lt;br&gt;&lt;b&gt;Минусы:&amp;nbsp;&lt;/b&gt;&lt;br&gt;Пользователей очень много и если они постоянно будет подписываться и отписываться от уведомлений - то положат сервис аутентификации. Да и сервис аутентификации не хочется никаким образом привязывать к уведомлениям (потому что если изменятся каналы отправки, то надо будет править auth сервис, а этого лучше избежать)" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="30" y="1070" width="260" height="260" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
